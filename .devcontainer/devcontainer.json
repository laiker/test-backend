{
  "name": "PHP Interview - Bonus System",
  "dockerComposeFile": "docker-compose.yml",
  "service": "workspace",
  "workspaceFolder": "/workspace",
  "shutdownAction": "stopCompose",

  // Настройки VS Code
  "customizations": {
    "vscode": {
      // Расширения для PHP разработки
      "extensions": [
        "xdebug.php-debug",
        "bmewburn.vscode-intelephense-client",
        "DEVSENSE.phptools-vscode",
        "formulahendry.auto-close-tag",
        "EditorConfig.EditorConfig"
      ],
      
      // Настройки редактора
      "settings": {
        "php.validate.executablePath": "/usr/local/bin/php",
        "terminal.integrated.defaultProfile.linux": "bash",
        "editor.formatOnSave": false,
        "files.eol": "\n",
        "workbench.startupEditor": "readme",
        "files.associations": {
          "*.php": "php",
          "*.md": "markdown"
        },
        "workbench.secondarySideBar.defaultVisibility": false,
        "chat.commandCenter.enabled": false,
        
        // Xdebug configuration
        "php.debug.executablePath": "/usr/local/bin/php",
        "php.debug.port": 9003,
        
        // Disable telemetry
        "telemetry.telemetryLevel": "off"
      }
    }
  },

  // Порты для проброса
  "forwardPorts": [9003],
  "portsAttributes": {
    "9003": {
      "label": "Xdebug",
      "onAutoForward": "silent"
    }
  },

  // Команды жизненного цикла
  "postCreateCommand": "bash -lc 'if [ -d test-backend ]; then cd test-backend; fi; composer install && php bin/setup-db.php && clear || true; php bin/console.php calculate-bonuses 2026-02 || true; vendor/bin/phpunit --testdox --colors=never || true'",
  "postStartCommand": "cat .devcontainer/welcome.txt && echo && sed -n '1,160p' README.md",

  // Features (дополнительные инструменты)
  "features": {
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {}
  },

  // Переменные окружения
  "containerEnv": {
    "XDEBUG_MODE": "debug",
    "XDEBUG_CONFIG": "client_host=localhost client_port=9003"
  },

  // Права пользователя
  "remoteUser": "vscode"
}
